(this["webpackJsonpbook-management"]=this["webpackJsonpbook-management"]||[]).push([[0],{101:function(e,t,a){var c=a(38);c.defaults.baseURL="http://localhost:4000",c.interceptors.request.use((function(e){return e.headers["Content-type"]="application/json",e}))},103:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(20),o=a.n(r),i=(a(73),a(74),a(10)),s=a(12),l=a(23),d=a(109),j=a(67),b=a(111),u=a(112),O=a(1),h=function(e){var t=e.show,a=e.handleClose,c=e.confirmDelete,n=e.id,r=e.title,o=e.bodyDescription,i=e.buttonName;return Object(O.jsxs)(u.a,{show:t,onHide:a,children:[Object(O.jsx)(u.a.Header,{closeButton:!0,children:Object(O.jsx)(u.a.Title,{children:r})}),Object(O.jsx)(u.a.Body,{children:o}),Object(O.jsxs)(u.a.Footer,{children:[Object(O.jsx)(j.a,{variant:"secondary",onClick:a,children:"Close"}),Object(O.jsx)(j.a,{variant:"primary",onClick:function(){return c(n)},children:i})]})]})},p=a(8),g=a(113);var x=function(e){var t=e.show,a=(e.handleShow,e.handleClose),n=e.addBook,r=e.editBook,o=Object(s.c)((function(e){return e.editData})),i=Object(s.b)(),d=Object(c.useState)({title:"",category:"",price:0,rating:0,description:"",author:""}),b=Object(l.a)(d,2),h=b[0],x=b[1];return Object(c.useEffect)((function(){o&&x(o)}),[o]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(u.a,{show:t,onHide:a,className:"book-modal-wrapper",children:[Object(O.jsx)(u.a.Header,{children:Object(O.jsx)(u.a.Title,{children:o?"Edit Book":"Add Book"})}),Object(O.jsx)(u.a.Body,{children:Object(O.jsxs)(g.a,{children:[Object(O.jsxs)(g.a.Group,{controlId:"formBasicName",children:[Object(O.jsx)(g.a.Label,{children:"Title"}),Object(O.jsx)(g.a.Control,{type:"text",placeholder:"Enter title",name:"title",value:h.title,onChange:function(e){return x(Object(p.a)(Object(p.a)({},h),{},{title:e.target.value}))}})]}),Object(O.jsxs)(g.a.Group,{controlId:"formBasicName",children:[Object(O.jsx)(g.a.Label,{children:"Author"}),Object(O.jsx)(g.a.Control,{type:"text",placeholder:"Enter Author name",name:"author",value:h.author,onChange:function(e){return x(Object(p.a)(Object(p.a)({},h),{},{author:e.target.value}))}})]}),Object(O.jsxs)(g.a.Group,{controlId:"formBasicType",children:[Object(O.jsx)(g.a.Label,{children:"Category"}),Object(O.jsx)(g.a.Control,{type:"text",placeholder:"Enter category of Book",name:"category",value:h.category,onChange:function(e){return x(Object(p.a)(Object(p.a)({},h),{},{category:e.target.value}))}})]}),Object(O.jsxs)(g.a.Group,{controlId:"formBasicQuantity",children:[Object(O.jsx)(g.a.Label,{children:"Price"}),Object(O.jsx)(g.a.Control,{type:"number",placeholder:"Enter Price",name:"price",value:h.price,onChange:function(e){return x(Object(p.a)(Object(p.a)({},h),{},{price:e.target.value}))}})]}),Object(O.jsxs)(g.a.Group,{controlId:"formBasicQuantity",children:[Object(O.jsx)(g.a.Label,{children:"Ratings"}),Object(O.jsx)(g.a.Control,{type:"number",placeholder:"Enter Price",max:5,name:"rating",value:h.rating,onChange:function(e){return x(Object(p.a)(Object(p.a)({},h),{},{rating:e.target.value}))}})]}),Object(O.jsxs)(g.a.Group,{controlId:"formBasicNote",children:[Object(O.jsx)(g.a.Label,{children:"Description"}),Object(O.jsx)(g.a.Control,{type:"text",placeholder:"Enter a description",name:"description",value:h.description,onChange:function(e){return x(Object(p.a)(Object(p.a)({},h),{},{description:e.target.value}))}})]}),Object(O.jsxs)(g.a,{children:[Object(O.jsx)(g.a.Label,{children:"Image"}),Object(O.jsx)(g.a.File,{id:"custom-file",label:"upload book image",custom:!0,onChange:function(e){x(Object(p.a)(Object(p.a)({},h),{},{image:e.target.files[0]}))}})]})]})}),Object(O.jsxs)(u.a.Footer,{children:[Object(O.jsx)(j.a,{variant:"secondary",onClick:function(){a(),x({title:"",category:"",price:0,rating:0,description:"",author:""})},children:"Close"}),o?Object(O.jsx)(j.a,{variant:"primary",onClick:function(){h.title&&h.title.trim()?h.category&&h.category.trim()?h.rating?h.rating>5?i({type:"SET_TOAST",payload:"Rating error"}):h.author&&h.author.trim()?h.price?(r(o._id,h),x({title:"",category:"",price:0,rating:0,description:"",author:""})):i({type:"SET_TOAST",payload:"Please Enter price"}):i({type:"SET_TOAST",payload:"Please Enter author name"}):i({type:"SET_TOAST",payload:"Please enter price"}):i({type:"SET_TOAST",payload:"Please Enter category"}):i({type:"SET_TOAST",payload:"Please Enter title"})},children:"Edit Book"}):Object(O.jsx)(j.a,{variant:"primary",onClick:function(){h.title&&h.title.trim()?h.category&&h.category.trim()?h.author&&h.author.trim()?h.image?h.price&&h.rating?h.rating>5?i({type:"SET_TOAST",payload:"Rating error"}):(n(h),x({title:"",category:"",price:0,rating:0,description:"",author:""})):i({type:"SET_TOAST",payload:"Please enter price"}):i({type:"SET_TOAST",payload:"Please upload a file"}):i({type:"SET_TOAST",payload:"Please enter author name"}):i({type:"SET_TOAST",payload:"Please Enter category"}):i({type:"SET_TOAST",payload:"Please Enter title"})},children:"Add Book"})]})]})})},m=a(108),y=a.p+"static/media/Edit.9de65eb5.svg",f=a.p+"static/media/delete.6dcadd95.svg";var T=function(e){var t=e.data,a=e.deleteBook,c=e.editBook;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"object"===typeof t.image?Object(O.jsx)("img",{src:URL.createObjectURL(t.image),alt:"book",className:"round-image"}):Object(O.jsx)("img",{src:"data:image/jpeg;base64,".concat(t.image),alt:"book",className:"round-image"})}),Object(O.jsx)("td",{children:t.title}),Object(O.jsx)("td",{children:t.price}),Object(O.jsx)("td",{children:t.author}),Object(O.jsx)("td",{children:t.rating}),Object(O.jsx)("td",{children:t.category}),Object(O.jsx)("td",{children:t.description||"NA"}),Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:y,alt:"EDIT",onClick:function(){return c(t._id)},className:"svg-image"})}),Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:f,alt:"DELETE",onClick:function(){return a(t._id)},className:"svg-image"})})]})};var v=function(e){var t=Object(s.c)((function(e){return e})).filteredData;return Object(O.jsx)("div",{children:Object(O.jsxs)(m.a,{striped:!0,bordered:!0,hover:!0,children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Image"}),Object(O.jsx)("th",{children:"Title"}),Object(O.jsx)("th",{children:"Price"}),Object(O.jsx)("th",{children:"Author"}),Object(O.jsx)("th",{children:"Ratings"}),Object(O.jsx)("th",{children:"Category"}),Object(O.jsx)("th",{children:"Description"}),Object(O.jsx)("th",{children:"Edit"}),Object(O.jsx)("th",{children:"Delete"})]})}),Object(O.jsx)("tbody",{children:(null===t||void 0===t?void 0:t.length)>0&&t.map((function(t){return Object(O.jsx)(T,{data:t,editBook:e.handleEdit,deleteBook:e.deleteBook},t.id)}))})]})})},E=a(38),S=a.n(E),k="http://localhost:3000",N=k+"/books",C=k+"/books?id=",_=function(){return function(e){S.a.get(N).then((function(e){return e.data})).then((function(t){t&&e({type:"SET_BOOK_LIST",payload:t})})).catch((function(t){e({type:"SET_TOAST",payload:t.message})}))}};var A=function(e){return"string"===typeof e?e.toUpperCase():e};var D=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(!1),o=Object(l.a)(r,2),i=o[0],u=o[1],p=Object(c.useState)(!1),g=Object(l.a)(p,2),m=g[0],y=g[1],f=Object(s.b)(),T=Object(s.c)((function(e){return e})),E=T.data,k=T.filteredData;return Object(c.useEffect)((function(){f(_())}),[f]),Object(O.jsx)("div",{className:"mt-3",children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)("div",{className:"add-button",children:Object(O.jsx)(j.a,{onClick:function(){return n(!a)},variant:"outline-primary",children:"Add Book"})}),E&&E.length>0&&Object(O.jsxs)("div",{className:"filter_box_wrapper",children:[Object(O.jsx)("div",{className:"rating_wise_filter",children:Object(O.jsx)("input",{type:"text",name:"search",id:"search",class:"form-control",width:"50%",placeholder:"Search category",onChange:function(e){var t={category:e.target.value},a=function(e,t){var a=Object.keys(t);return e.filter((function(e){return Object.keys(e).every((function(){return a.every((function(a){return!t[a].length||!e[a]||A(e[a]).includes(A(t[a]))}))}))}))}(E,t);f({type:"FILTERED_DATA",payload:a})}})}),Object(O.jsx)("div",{className:"dropdown",children:Object(O.jsxs)(b.a,{onSelect:function(e){return function(e){var t=[];t="ALL"===e?E:E.filter((function(t){return t.rating>=e&&t.rating<=parseInt(e)+1})),f({type:"FILTERED_DATA",payload:t})}(e)},children:[Object(O.jsx)(b.a.Toggle,{id:"dropdown-basic",children:"Rating"}),Object(O.jsxs)(b.a.Menu,{children:[Object(O.jsx)(b.a.Item,{eventKey:1,children:"1-2"}),Object(O.jsx)(b.a.Item,{eventKey:2,children:"2-3"}),Object(O.jsx)(b.a.Item,{eventKey:3,children:"3-4"}),Object(O.jsx)(b.a.Item,{eventKey:4,children:"4-5"}),Object(O.jsx)(b.a.Item,{eventKey:"ALL",children:"All"})]})]})})]}),k&&k.length>0&&Object(O.jsx)(v,{handleEdit:function(e){n(!0),f({type:"EDIT",payload:e})},deleteBook:function(e){u(e),y(!0)}}),Object(O.jsx)(x,{editBook:function(e,t){var a=new FormData;t.title&&a.append("title",t.title),t.price&&a.append("price",t.price),t.author&&a.append("author",t.author),t.rating&&a.append("rating",t.rating),t.category&&a.append("category",t.category),t.description&&a.append("description",t.description),t.image&&a.append("image",t.image),n(!1),f(function(e,t){return function(a){S.a.put(C+e,t).then((function(e){return e.data})).then((function(e){e&&a(_())})).catch((function(e){a({type:"SET_TOAST",payload:e.message})}))}}(e,t))},show:a,handleClose:function(){f({type:"REMOVE_BOOK_EDIT_DATA"}),n(!1)},addBook:function(e){var t,a=new FormData;a.append("title",e.title),a.append("price",e.price),a.append("author",e.author),a.append("rating",e.rating),e.category&&a.append("category",e.category),a.append("description",e.description),a.append("image",e.image),n(!1),f((t=a,function(e){S.a.post(N,t).then((function(e){return e.data})).then((function(t){t&&e(_())})).catch((function(t){e({type:"SET_TOAST",payload:t.message})}))}))}}),Object(O.jsx)(h,{title:"Confirmation Popup",bodyDescription:"Are you sure to Delete!",buttonName:"DELETE",show:m,id:i,handleClose:function(){return y(!1)},confirmDelete:function(e){f(function(e){return function(t){S.a.delete(C+e).then((function(e){return e.data})).then((function(e){t(_())})).catch((function(e){t({type:"SET_TOAST",payload:e.message})}))}}(e)),y(!1)}})]})})},w=a(110),I=a.p+"static/media/login.994e2d6f.jpg",L=a.p+"static/media/logo.6ce24c58.svg";var B=function(){var e=Object(s.b)(),t=Object(c.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],o=Object(c.useState)(""),i=Object(l.a)(o,2),d=i[0],j=i[1],b=Object(c.useState)(""),u=Object(l.a)(b,2),h=u[0],p=u[1];return Object(O.jsx)("div",{className:"login-wrapper",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"card login-card",children:Object(O.jsxs)("div",{className:"row no-gutters",children:[Object(O.jsx)("div",{className:"col-md-5",children:Object(O.jsx)("img",{src:I,alt:"login",className:"login-card-img"})}),Object(O.jsx)("div",{className:"col-md-7",children:Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsx)("div",{className:"brand-wrapper",children:Object(O.jsx)("img",{src:L,alt:"logo",className:"logo"})}),Object(O.jsx)("p",{className:"login-card-description",children:"Sign into your account"}),Object(O.jsxs)("form",{action:"#!",children:[Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{for:"email",className:"sr-only",children:"Email"}),Object(O.jsx)("input",{type:"email",name:"email",id:"email",className:"form-control",placeholder:"Email address",onChange:function(e){return j(e.target.value)}})]}),Object(O.jsxs)("div",{className:"form-group mb-4",children:[Object(O.jsx)("label",{for:"password",className:"sr-only",children:"Password"}),Object(O.jsx)("input",{type:"password",name:"password",id:"password",className:"form-control",onChange:function(e){return p(e.target.value)},placeholder:"***********"})]}),n&&Object(O.jsx)("div",{className:"text-center",children:Object(O.jsx)(w.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),Object(O.jsx)("input",{name:"login",id:"login",className:"btn btn-block login-btn mb-4",type:"button",value:"Login",onClick:function(){d&&h&&(r(!0),setTimeout((function(){r(!1),localStorage.setItem("token","JWT TOKEN HERE"),e({type:"LOGGED_IN",payload:"JWT TOKEN HERE"})}),3e3))}})]}),Object(O.jsxs)("nav",{className:"login-card-footer-nav",children:[Object(O.jsx)("a",{href:"#!",children:"Terms of use."}),Object(O.jsx)("a",{href:"#!",children:"Privacy policy"})]})]})})]})})})})},P=a(114);var R=function(){var e=Object(s.b)();return Object(O.jsx)(P.a,{style:{backgroundColor:"#e4e6eb",boxShadow:"1px 1px 2px grey"},children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)(P.a.Brand,{href:"#home",children:"Books"}),Object(O.jsx)(P.a.Toggle,{}),Object(O.jsx)(P.a.Collapse,{className:"justify-content-end",children:Object(O.jsx)(P.a.Text,{children:Object(O.jsx)(j.a,{variant:"outline-secondary",onClick:function(){localStorage.removeItem("token"),e({type:"LOG_OUT"})},children:"Logout"})})})]})})},F=a(115);var G=function(e){var t=e.show,a=e.delay,c=e.closeToast,n=e.message;return Object(O.jsxs)(F.a,{onClose:c,show:t,delay:a,autohide:!0,style:{position:"absolute",top:20,width:"400px",zIndex:"99999",right:40},children:[Object(O.jsxs)(F.a.Header,{className:{fontSize:"20px"},children:[Object(O.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded mr-2",alt:""}),Object(O.jsx)("strong",{className:"mr-auto text-danger",children:"Error!"})]}),Object(O.jsx)(F.a.Body,{style:{fontWeight:600,fontSize:"18px"},children:n})]})};var K=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e})),a=localStorage.getItem("token");return t.isLoggedIn||a?Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(R,{}),Object(O.jsx)(i.c,{children:Object(O.jsx)(i.a,{exact:!0,path:"/",children:Object(O.jsx)(D,{})})}),t.showToast&&Object(O.jsx)(G,{show:t.showToast,delay:"3000",closeToast:function(){return e({type:"CLOSE_TOAST"})},message:t.toastMessage})]}):Object(O.jsx)(i.c,{children:Object(O.jsx)(i.a,{exact:!0,path:"*",children:Object(O.jsx)(B,{})})})},M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,116)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),c(e),n(e),r(e),o(e)}))},H=a(58),U=a(68),J={isLoggedIn:!1,token:"",data:[],editData:null,showToast:!1,toastMessage:"",filteredData:[]},z=Object(H.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN":return Object(p.a)(Object(p.a)({},e),{},{isLoggedIn:!0,token:t.payload});case"LOG_OUT":return Object(p.a)(Object(p.a)({},e),{},{isLoggedIn:!1});case"SET_BOOK_LIST":return Object(p.a)(Object(p.a)({},e),{},{data:t.payload,filteredData:t.payload});case"FILTERED_DATA":return Object(p.a)(Object(p.a)({},e),{},{filteredData:t.payload});case"EDIT":var a=e.data,c=a.find((function(e){return e._id===t.payload}));return Object(p.a)(Object(p.a)({},e),{},{editData:c});case"REMOVE_BOOK_EDIT_DATA":return Object(p.a)(Object(p.a)({},e),{},{editData:null});case"CLOSE_TOAST":return Object(p.a)(Object(p.a)({},e),{},{showToast:!1,toastMessage:null});case"SET_TOAST":return Object(p.a)(Object(p.a)({},e),{},{showToast:!0,toastMessage:t.payload});default:return e}}),Object(H.a)(U.a)),W=a(55);a(101),a(102);o.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(s.a,{store:z,children:Object(O.jsx)(W.a,{children:Object(O.jsx)(K,{})})})}),document.getElementById("root")),M()},73:function(e,t,a){},74:function(e,t,a){}},[[103,1,2]]]);
//# sourceMappingURL=main.7fad69b1.chunk.js.map